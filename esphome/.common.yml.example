esphome:
  name: ${device_name}
  comment: ${device_description}
  name_add_mac_suffix: false

# WiFi connection
wifi:
  #  use_address: 192.168.2.130
  networks:
  - ssid: MeinWifi
    password: "12345"
    priority: 1
  ap:
    ssid: ${device_name}_fallback
    password: "fallbacksomething"
    ap_timeout: 1min

captive_portal:

# Enable logging
logger:

# Enable Home Assistant API
api:
  password: "changeme"

# Enable over-the-air updates
ota:
  - platform: esphome
    password: "changeme"

# Enable Web server
web_server:
  port: 80

mdns:

time:
  - platform: sntp
    id: sntp_time
    timezone: "Europe/Berlin"
    on_time_sync:
      then:
        - logger.log: "Synchronized sntp clock"
        - text_sensor.template.publish:
            id: ora_text_sync
            state: "Sync SNTP clock"

# Text sensors with general information
text_sensor:
  - platform: version
    name: ${friendly_name} Version
  - platform: wifi_info
    ip_address:
      name: ${friendly_name} IP Address
  - platform: template
    name: "Time Sync"
    id: ora_text_sync

  - platform: template
    name: "Current Time"
    id: ora_text
    update_interval: 60s
    lambda: |-
      auto time_text = id(sntp_time).now().strftime("%H:%M:%S - %d-%m-%Y");
      return { time_text };

sensor:
  # Uptime sensor
  - platform: uptime
    name: ${friendly_name} Uptime
  # WiFi Signal sensor
  - platform: wifi_signal
    name: ${friendly_name} Wifi Signal
    update_interval: 60s

